{"version":3,"names":["React","useEffect","useReducer","useRef","useCallback","createContext","useMemo","NativeEventEmitter","NativeModules","BleManager","BluetoothDispatchContext","BluetoothStateContext","bluetoothReducer","initialState","ELM327_PROMPT_BYTE","CommandReturnType","BleManagerModule","bleManagerEmitter","InternalCommandControlContext","undefined","displayName","BluetoothProvider","children","_state$connectedDevic2","state","dispatch","currentCommandRef","handleIncomingData","dataValue","isAwaitingResponse","current","commandState","responseChunks","push","responseBuffer","promptIndex","indexOf","responseBytes","slice","processedChunks","processResponseChunks","timeoutId","clearTimeout","response","expectedReturnType","STRING","decodeResponse","BYTES","Uint8Array","from","CHUNKED","data","chunks","map","chunk","promise","resolve","type","error","_currentCommandRef$cu","console","reject","handleError","payload","flatBuffer","runningLength","i","length","chunkLength","promptPositionInChunk","splice","bytes","TextDecoder","decode","trim","e","warn","String","fromCharCode","Error","listenersRef","info","start","showAlert","then","checkState","catch","listeners","addListener","args","isBtOn","peripheral","_peripheral$name","name","toUpperCase","likelyOBDKeywords","isLikelyOBD","some","keyword","includes","peripheralWithPrediction","_state$connectedDevic","connectedDevice","id","value","forEach","listener","remove","commandControlValue","createElement","Provider","useInternalCommandControl","context","useContext"],"sourceRoot":"../../../src","sources":["context/BluetoothProvider.tsx"],"mappings":"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","ignoreList":[]}