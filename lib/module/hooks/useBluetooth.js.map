{"version":3,"names":["useCallback","useRef","useEffect","Platform","BleManager","Permissions","useBluetoothDispatch","useBluetoothState","useInternalCommandControl","KNOWN_ELM327_TARGETS","DEFAULT_COMMAND_TIMEOUT","ELM327_COMMAND_TERMINATOR","ELM327_PROMPT_BYTE","createDeferredPromise","resolveFn","rejectFn","promise","Promise","resolve","reject","useBluetooth","state","dispatch","currentCommandRef","scanPromiseRef","connectPromiseRef","disconnectPromiseRef","checkPermissions","console","info","requiredPermissions","OS","Version","PERMISSIONS","ANDROID","BLUETOOTH_SCAN","BLUETOOTH_CONNECT","ACCESS_FINE_LOCATION","IOS","LOCATION_WHEN_IN_USE","length","type","payload","statuses","checkMultiple","allGranted","every","permission","RESULTS","GRANTED","error","requestBluetoothPermissions","permissionsToRequest","iosBlePermissionNeeded","finalStatuses","requestMultiple","iosBluetoothGranted","bleStatus","request","BLUETOOTH_PERIPHERAL","UNAVAILABLE","finalGranted","warn","blocked","Object","values","some","status","BLOCKED","promptEnableBluetooth","isBluetoothOn","enableBluetooth","Error","message","String","scanDevices","scanDurationMs","hasPermissions","isScanning","current","scanSeconds","Math","max","round","timeoutId","setTimeout","stopScan","stopError","scan","clearTimeout","connectToDevice","deviceId","isConnecting","connectedDevice","id","connect","peripheralInfo","retrieveServices","services","map","s","uuid","foundConfig","target","serviceUUIDUpper","serviceUUID","toUpperCase","writeCharUUIDUpper","writeCharacteristicUUID","notifyCharUUIDUpper","notifyCharacteristicUUID","foundService","find","name","characteristics","filter","c","service","writeCharacteristic","characteristic","notifyCharacteristic","writeType","properties","Write","startNotification","device","config","disconnect","disconnectError","isDisconnecting","activeDeviceConfig","stopNotification","executeCommand","command","returnType","options","isAwaitingResponse","commandTimeoutDuration","timeout","deferredPromise","responseBuffer","expectedReturnType","commandString","commandBytes","Array","from","TextEncoder","encode","write","writeWithoutResponse","response","sendCommand","result","sendCommandRaw","Uint8Array","setStreaming","shouldStream","isStreaming","promptIndex","indexOf","responseBytes","slice","responseString","TextDecoder","decode","trim","e","fromCharCode"],"sourceRoot":"../../../src","sources":["hooks/useBluetooth.ts"],"mappings":"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","ignoreList":[]}
