{"version":3,"names":["_react","require","_reactNative","_reactNativeBleManager","_interopRequireDefault","Permissions","_interopRequireWildcard","_BluetoothContext","_BluetoothProvider","_constants","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","createDeferredPromise","resolveFn","rejectFn","promise","Promise","resolve","reject","useBluetooth","state","useBluetoothState","dispatch","useBluetoothDispatch","currentCommandRef","useInternalCommandControl","scanPromiseRef","useRef","connectPromiseRef","disconnectPromiseRef","checkPermissions","useCallback","console","info","requiredPermissions","Platform","OS","Version","PERMISSIONS","ANDROID","BLUETOOTH_SCAN","BLUETOOTH_CONNECT","ACCESS_FINE_LOCATION","IOS","LOCATION_WHEN_IN_USE","length","type","payload","statuses","checkMultiple","allGranted","every","permission","RESULTS","GRANTED","error","requestBluetoothPermissions","permissionsToRequest","iosBlePermissionNeeded","finalStatuses","requestMultiple","iosBluetoothGranted","bleStatus","request","BLUETOOTH_PERIPHERAL","UNAVAILABLE","finalGranted","warn","blocked","values","some","status","BLOCKED","promptEnableBluetooth","isBluetoothOn","BleManager","enableBluetooth","Error","message","String","scanDevices","scanDurationMs","hasPermissions","isScanning","current","scanSeconds","Math","max","round","timeoutId","setTimeout","stopScan","stopError","scan","clearTimeout","connectToDevice","deviceId","isConnecting","connectedDevice","id","connect","peripheralInfo","retrieveServices","services","map","s","uuid","foundConfig","target","KNOWN_ELM327_TARGETS","serviceUUIDUpper","serviceUUID","toUpperCase","writeCharUUIDUpper","writeCharacteristicUUID","notifyCharUUIDUpper","notifyCharacteristicUUID","foundService","find","name","characteristics","filter","c","service","writeCharacteristic","characteristic","notifyCharacteristic","writeType","properties","Write","startNotification","device","config","disconnect","disconnectError","isDisconnecting","activeDeviceConfig","stopNotification","executeCommand","command","returnType","options","isAwaitingResponse","commandTimeoutDuration","timeout","DEFAULT_COMMAND_TIMEOUT","deferredPromise","responseBuffer","expectedReturnType","commandString","ELM327_COMMAND_TERMINATOR","commandBytes","Array","from","TextEncoder","encode","write","writeWithoutResponse","response","sendCommand","result","sendCommandRaw","Uint8Array","setStreaming","shouldStream","isStreaming","useEffect","promptIndex","indexOf","ELM327_PROMPT_BYTE","responseBytes","slice","responseString","TextDecoder","decode","trim","fromCharCode","exports"],"sourceRoot":"../../../src","sources":["hooks/useBluetooth.ts"],"mappings":"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","ignoreList":[]}
